% fix for soul in beamer
% https://tex.stackexchange.com/questions/41683/why-is-it-that-coloring-in-soul-in-beamer-is-not-visible
\makeatletter
\let\HL\hl
\renewcommand\hl{%
  \let\set@color\beamerorig@set@color
  \let\reset@color\beamerorig@reset@color
  \HL}
\makeatother

\makeatletter
\let\UL\ul
\renewcommand\ul{%
  \let\set@color\beamerorig@set@color
  \let\reset@color\beamerorig@reset@color
  \UL}
\makeatother

\lstset{basicstyle=\ttfamily\footnotesize,language=python,escapeinside=||}

\begin{frame}[fragile]{Listbyggare}

  Övning 404: Konstruera en funktion \texttt{distribute} som tar ett element och
  en lista av listor, och lägger in elementet i varje dellista.

  \pause{}

  \begin{lstlisting}
def distribute(elem, lists):
    distributed = []
    for lst in lists:
        distributed.append(lst + [elem])
    return distributed
  \end{lstlisting}

  \pause{}

  \begin{lstlisting}
def distribute(elem, lists):
    return [lst + [elem] for lst in lists]
  \end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Listbyggare, men med färger}

  Övning 404: Konstruera en funktion \texttt{distribute} som tar ett element och
  en lista av listor, och lägger in elementet i varje dellista.

  \begin{lstlisting}
def distribute(elem, lists):
    |\sethlcolor{orange}\hl{distributed = []}|
    for |\sethlcolor{cyan}\hl{lst in lists}|:
        |\sethlcolor{orange}\hl{distributed.append}|(|\sethlcolor{cyan}\hl{lst}| + [elem])
    return distributed
  \end{lstlisting}

  \begin{lstlisting}
def distribute(elem, lists):
    return [lst + [elem] for lst in lists]
  \end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Listbyggare, men med färger}

  Övning 404: Konstruera en funktion \texttt{distribute} som tar ett element och
  en lista av listor, och lägger in elementet i varje dellista.

  \begin{lstlisting}
def distribute(elem, lists):
    distributed = []
    |\sethlcolor{cyan}\hl{for lst in lists}|:
        distributed.append(|\sethlcolor{orange}\hl{lst + [elem]}|)
    return distributed
  \end{lstlisting}

  \begin{lstlisting}
def distribute(elem, lists):
    return [|\sethlcolor{orange}\hl{lst + [elem]}| |\sethlcolor{cyan}\hl{for lst in lists}|]
  \end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Listbyggare som ett filter}
  \begin{lstlisting}
def filter_strings(values):
    only_strings = []
    for val in values:
        if isinstance(val, str):
            only_strings.append(val)
    return only_strings
  \end{lstlisting}

  \begin{lstlisting}
def filter_strings(values):
    return [val for val in values if isinstance(val, str)]
  \end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Listbyggare som ett filter}
  \begin{lstlisting}
def filter_strings(values):
    only_strings = []
    for val in values:
        |\sethlcolor{orange}\hl{if isinstance(val, str)}|:
            only_strings.append(val)
    return only_strings
  \end{lstlisting}

  \begin{lstlisting}
def filter_strings(values):
    return [val for val in values |\sethlcolor{orange}\hl{if isinstance(val, str)}|]
  \end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Listbyggare med två loopar}

  Övning 402: Konstruera en funktion all\_pairs som utifrån en lista ger en lista
  med alla par, d.v.s. alla möjliga sätt att kombinera två element ur
  originallistan.

  \begin{lstlisting}
def all_pairs(values):
    pairs = []
    for val1 in values:
        for val2 in values:
            pairs.append((val1, val2))
    return pairs
  \end{lstlisting}

  \vspace{2.35\baselineskip} % manually tested

\end{frame}

\begin{frame}[fragile]{Listbyggare med två loopar}

  Övning 402: Konstruera en funktion all\_pairs som utifrån en lista ger en lista
  med alla par, d.v.s. alla möjliga sätt att kombinera två element ur
  originallistan.

  \begin{lstlisting}
def all_pairs(values):
    pairs = []
    |\sethlcolor{orange}\hl{for val1 in values}|:
        |\sethlcolor{cyan}\hl{for val2 in values}|:
            pairs.append((|\sethlcolor{orange}\hl{val1}|, |\sethlcolor{cyan}\hl{val2}|))
    return pairs
  \end{lstlisting}

  \pause{}

  \begin{lstlisting}
def all_pairs(values):
    return [(|\sethlcolor{orange}\hl{val1}|, |\sethlcolor{cyan}\hl{val2}|) |\sethlcolor{cyan}\hl{for val2 in values}| |\sethlcolor{orange}\hl{for val1 in values}|]
  \end{lstlisting}

\end{frame}
